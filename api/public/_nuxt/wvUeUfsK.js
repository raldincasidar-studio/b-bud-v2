import{u as _,V as i}from"./sMAdQfB6.js";import{a as E,r,o as G,ak as b,H as F,A as l,al as J,v as H,z as a,x as K,y as c,B as y,aj as L}from"./BqUFuwH_.js";import{V as Q,a as v,b as u}from"./B_Nhs0y7.js";import{V as w}from"./BSP3Fj0n.js";import{V as W,b as X}from"./Cm-IjFOL.js";import{V as Z}from"./DOsTFkMG.js";import{V as h}from"./BszYr6sx.js";const de={__name:"[id]",setup(ee){const{$swal:O,$toast:C}=E(),g=J(),n=r(""),d=r(""),s=r(""),m=r(""),p=r(""),f=r(0),x=r(""),V=r(null);G(async()=>{var e,t,B,$,k,D,N,U,T,P,S,z,I,M,R,j,A;const{data:o}=await _(`/api/products/${b().params.id}`);(e=o.value)!=null&&e.product&&(n.value=(B=(t=o.value)==null?void 0:t.product)==null?void 0:B.serial_id,d.value=(k=($=o.value)==null?void 0:$.product)==null?void 0:k.brand,s.value=(N=(D=o.value)==null?void 0:D.product)==null?void 0:N.model,m.value=(T=(U=o.value)==null?void 0:U.product)==null?void 0:T.unit,p.value=(S=(P=o.value)==null?void 0:P.product)==null?void 0:S.comment,f.value=(I=(z=o.value)==null?void 0:z.product)==null?void 0:I.cod,x.value=((R=(M=o.value)==null?void 0:M.product)==null?void 0:R.customer_name)||"None",V.value=((A=(j=o.value)==null?void 0:j.product)==null?void 0:A.customer_id)||null)});const Y=async()=>{const o={serial_id:n.value,brand:d.value,model:s.value,unit:m.value,comment:p.value,cod:f.value};try{const{postData:e,error:t}=await _(`/api/products/${b().params.id}`,{method:"put",body:o});if(t.value)return;g.replace("/inventory")}catch(e){console.error(e),C.fire({title:"Something went wrong",icon:"error"})}},q=async()=>{const{isConfirmed:o}=await new O({title:`Delete ${d.value} ${s.value} [${n.value}]?`,text:"This can not be reversed!",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"});if(o)try{const{postData:e,error:t}=await _(`/api/products/${b().params.id}`,{method:"delete"});if(t.value)return;g.replace("/inventory")}catch(e){console.error(e),C.fire({title:"Something went wrong",icon:"error"})}};return(o,e)=>(H(),F(Q,{class:"my-10"},{default:l(()=>[a(v,{justify:"space-between mb-10"},{default:l(()=>[a(u,null,{default:l(()=>[K("h2",null,c(d.value)+" "+c(s.value)+" "+c(m.value)+" ["+c(n.value)+"]",1)]),_:1}),a(u,{class:"text-right"},{default:l(()=>[a(w,{rounded:"",size:"large",variant:"tonal",onClick:q,"prepend-icon":"mdi-delete",color:"red"},{default:l(()=>e[6]||(e[6]=[y("Delete")])),_:1}),a(w,{rounded:"",size:"large",variant:"tonal",onClick:Y,"prepend-icon":"mdi-package-variant",color:"blue"},{default:l(()=>e[7]||(e[7]=[y("Save Changes")])),_:1})]),_:1})]),_:1}),a(W,{"prepend-icon":"mdi-package-variant",title:"Product Information"},{default:l(()=>[a(X,null,{default:l(()=>[a(v,null,{default:l(()=>[a(u,{cols:"12",sm:"12",md:"6"},{default:l(()=>[a(i,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),label:"Serial ID"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",sm:"12",md:"6"},{default:l(()=>[a(i,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t),label:"Brand"},null,8,["modelValue"])]),_:1})]),_:1}),a(v,null,{default:l(()=>[a(u,{cols:"12",sm:"12",md:"6"},{default:l(()=>[a(i,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),label:"Model"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",sm:"12",md:"6"},{default:l(()=>[a(i,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t),label:"Unit"},null,8,["modelValue"])]),_:1})]),_:1}),a(v,null,{default:l(()=>[a(u,{cols:"12",sm:"12"},{default:l(()=>[a(Z,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t),label:"Comment / Note",rows:"3","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1}),a(v,null,{default:l(()=>[a(u,{cols:"12",sm:"12",md:"6"},{default:l(()=>[a(i,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=t=>f.value=t),label:"COD (Price)",prefix:"â‚±",type:"number"},null,8,["modelValue"])]),_:1}),V.value?(H(),F(u,{key:0,cols:"12",sm:"12",md:"6"},{default:l(()=>[a(w,{to:`/customers/${V.value}`,size:"large",color:"primary",variant:"tonal"},{default:l(()=>[a(h,{icon:"mdi-account",class:"mr-2"}),y(" Purchased by: "+c(x.value),1)]),_:1},8,["to"])]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}};export{de as default};
