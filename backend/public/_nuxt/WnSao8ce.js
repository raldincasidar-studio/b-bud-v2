import{a as N,r as x,ak as P,o as R,u as T,H as $,A as o,v as D,z as l,x as E,y as F,J as s,B as g}from"./B9-xBkuY.js";import{u as p,V as u}from"./BT3Eclwm.js";import{V as z,a as m,b as r}from"./DstkrNTH.js";import{V as B}from"./jOqUrdfT.js";import{V as A,b as S}from"./D96vCHme.js";import{d as I}from"./Dtg_j9Bd.js";import"./B69bbXLq.js";import"./Bm_DogWs.js";const O={__name:"[id]",setup(M){const{$swal:U,$toast:f}=N(),a=x({name:"",role:"",username:"",password:"",confirmPassword:""}),i=P();R(async()=>{var t,V,y,v,w,b,C;const{data:n,error:e}=await p("/api/employees/"+i.params.id);console.log(n.value),(t=n.value)!=null&&t.employee&&(a.value.name=(y=(V=n.value)==null?void 0:V.employee)==null?void 0:y.name,a.value.role=(w=(v=n.value)==null?void 0:v.employee)==null?void 0:w.role,a.value.username=(C=(b=n.value)==null?void 0:b.employee)==null?void 0:C.username)});const d=x(!1),c=T();async function _(){d.value=!0;const{data:n,error:e,status:t}=await p("/api/employees/"+i.params.id,{method:"put",body:{...a.value}});if(console.log(n),e.value){d.value=!1;return}c.push("/employees"),f.fire({title:"Employee updated!",icon:"success"})}async function k(){const{isConfirmed:n}=await new U({title:`Delete ${a.username}?`,text:"This can not be reversed!",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"});!n||(await p("/api/employees/"+i.params.id,{method:"delete"})).error.value||(f.fire({title:"Deleted!",icon:"success"}),c.replace("/employees"))}return(n,e)=>(D(),$(z,{class:"my-10"},{default:o(()=>[l(m,{justify:"space-between mb-10"},{default:o(()=>[l(r,null,{default:o(()=>[E("h2",null,F(s(a).name),1)]),_:1}),l(r,{class:"text-right"},{default:o(()=>[l(B,{rounded:"",size:"large",variant:"tonal",onClick:e[0]||(e[0]=t=>k()),"prepend-icon":"mdi-delete",color:"red"},{default:o(()=>e[7]||(e[7]=[g("Delete")])),_:1}),l(B,{disabled:s(d),rounded:"",size:"large",variant:"tonal",onClick:e[1]||(e[1]=t=>_()),"prepend-icon":"mdi-account-plus",color:"blue"},{default:o(()=>e[8]||(e[8]=[g("Save Employee")])),_:1},8,["disabled"])]),_:1})]),_:1}),l(A,{"prepend-icon":"mdi-account",title:"User Information",loading:s(d),disabled:s(d)},{default:o(()=>[l(S,null,{default:o(()=>[l(m,null,{default:o(()=>[l(r,{cols:"12",sm:"12",md:"6"},{default:o(()=>[l(u,{modelValue:s(a).name,"onUpdate:modelValue":e[2]||(e[2]=t=>s(a).name=t),label:"Name"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"12",md:"6"},{default:o(()=>[l(I,{modelValue:s(a).role,"onUpdate:modelValue":e[3]||(e[3]=t=>s(a).role=t),label:"Role",items:["Administrator","Receptionist","Collector"]},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:o(()=>[l(r,{cols:"12",sm:"12",md:"12"},{default:o(()=>[l(u,{modelValue:s(a).username,"onUpdate:modelValue":e[4]||(e[4]=t=>s(a).username=t),label:"Username"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:o(()=>[l(r,{cols:"12",sm:"12",md:"6"},{default:o(()=>[l(u,{modelValue:s(a).password,"onUpdate:modelValue":e[5]||(e[5]=t=>s(a).password=t),label:"Password",type:"password","append-inner-icon":"mdi-eye"},null,8,["modelValue"])]),_:1}),l(r,{cols:"12",sm:"12",md:"6"},{default:o(()=>[l(u,{modelValue:s(a).confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>s(a).confirmPassword=t),label:"Confirm Password",type:"password","append-inner-icon":"mdi-eye"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading","disabled"])]),_:1}))}};export{O as default};
